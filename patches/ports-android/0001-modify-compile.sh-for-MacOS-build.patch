From 7458dab82b448e3d84b983cb46a6559aadcba7f0 Mon Sep 17 00:00:00 2001
From: bbcallen <bbcallen@gmail.com>
Date: Mon, 5 Mar 2012 17:18:45 +0800
Subject: [PATCH 1/5] modify compile.sh for MacOS build

---
 compile.sh |   11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

diff --git a/compile.sh b/compile.sh
index 299f627..159f192 100755
--- a/compile.sh
+++ b/compile.sh
@@ -35,7 +35,7 @@ fi
 
 # Add the NDK toolchain to the PATH, needed both for contribs and for building
 # stub libraries
-export PATH=${ANDROID_NDK}/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin:${PATH}
+export PATH=${ANDROID_NDK}/toolchains/arm-linux-androideabi-4.4.3/prebuilt/darwin-x86/bin:${PATH}
 
 # 1/ libvlc, libvlccore and its plugins
 TESTED_HASH=5069692bfb
@@ -59,6 +59,9 @@ echo "Applying the patches"
 cd vlc
 git am ../patches/*.patch || git am --abort
 
+echo "Applying the patches for MacOS"
+git am ../../patches/vlc/*.patch || git am --abort
+
 echo "Building the contribs"
 mkdir contrib/android; cd contrib/android
 ../bootstrap --host=arm-linux-androideabi --disable-disc --disable-sout --enable-small \
@@ -82,6 +85,12 @@ mkdir contrib/android; cd contrib/android
 
 # TODO: mpeg2, dts, theora
 
+if  test -d "../../../../tarballs" ; then
+    echo "fetch local tarballs"
+    mkdir -p ../tarballs
+    cp -n ../../../../tarballs/* ../tarballs/
+fi
+
 make fetch
 make
 
-- 
1.7.9.4

